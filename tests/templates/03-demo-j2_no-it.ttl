{#-
 #  This template mainly shows of some standard tricks available in jinja2 to optimise template-management
-#}
@prefix ex: <https://example.org/03-demo-j2_no-it/>.
{% import 'macros/things-and-countries.ttl' as tac -%}
{% if ctrl.isFirst -%}{# executes only on first iteration -- equaly so in no-iteration modus -#}
{% include 'includes/prefixes.ttl' %}
{% endif %}

{%- set used_countries = [] %}
{% for thing in sets['_'] -%}
    {%- set ign = used_countries.append(thing.country) -%}
{{ tac.ttl_thing(thing) }}
{%- endfor -%}

{% for country in sets['countries'] -%}
    {% if country['Alpha-3 code'] in used_countries -%}
{{ tac.ttl_country(country) }}
    {%- endif -%}
{%- endfor -%}
{# also not how one control whitespace produced by jinja through -- https://jinja.palletsprojects.com/en/3.0.x/templates/#whitespace-control #}
